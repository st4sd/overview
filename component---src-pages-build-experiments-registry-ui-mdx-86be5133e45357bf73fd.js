"use strict";(self.webpackChunkst4sd_overview=self.webpackChunkst4sd_overview||[]).push([[980],{1606:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return b}});var n=a(5987),i=(a(7294),a(4983)),r=a(1217);const o=["components"],l={},p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},s=p("PageDescription"),h=p("AnchorLinks"),d=p("AnchorLink"),m=p("Tabs"),u=p("Tab"),c=p("Video"),k={_frontmatter:l},f=r.Z;function b(e){let{components:t}=e,a=(0,n.Z)(e,o);return(0,i.kt)(f,Object.assign({},k,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(s,{mdxType:"PageDescription"},(0,i.kt)("p",null,"This page gives an overview of the functionality to build or modify experiments in a browser using the Build Canvas and Graph Library features of the ST4SD Virtual Experiments Registry UI.")),(0,i.kt)(h,{mdxType:"AnchorLinks"},(0,i.kt)(d,{mdxType:"AnchorLink"},"Create experiments via the Build Canvas"),(0,i.kt)(d,{mdxType:"AnchorLink"},"The Graph Library")),(0,i.kt)("h2",null,"Create experiments via the Build Canvas"),(0,i.kt)("p",null,"With the Build Canvas users can create new experiments and modify the graph of existing ones. The users can create Workflows and Components from scratch or re-use those that have already been persisted in the Graph Library. New deployment of ST4SD start with an empty library (more about the Graph Library in the next section)."),(0,i.kt)("p",null,"There are two ways to access the Build Canvas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To create a new experiment: Click on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Build an experiment")," link at the top left corner of the ST4SD Registry UI webpage"),(0,i.kt)("li",{parentName:"ul"},"To modify an existing experiment: Navigate to the main page of the experiment you wish to modify and click on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Edit experiment")," button.")),(0,i.kt)("p",null,"The Build Canvas looks like this:"),(0,i.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1080px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAx1AAAMdQEteJR1AAAB8ElEQVQoz4WSv4/SYBjHy2pijCYMBGKik4x3C6OJrvhjO/8EFwfjHTiYmDNxd7mDAcFLjG5OjkQTh0tMJBwFKgl9KX37i0qh0L5t6du+fU3b8yQufoZn+z7P9/s8DyNADUBDVOZT2VguDLSe/5pJqgJVSVgYxjJhtY4xjIVlWZTSKIFSyvi+jzE2zZU+UzjBPG7TRntzOliefEFAkFwHHR0d371z++GDe4/29mzbTsU0gXFdF2OMEAJgLGmLb2fzM2B3WP6n6PFAcBxUrTxnLt1nbr24ltuBIg/AhOM4AMBms2EwxoREYUiiKG0ZRlGw8dyI4DAMKaWtVuvxk4OXr988fVZRFFnTNAihLMuWZcW2w5BcEJKIkNgViSLf9ymlh4evrl65fPPG9d3dHQjhYDDodDosy5qmmU4m4XaDP2CMKaWVSpVJyOVysixLksTzvK7rQRAwtoORRyg938E2qbhaPRfn83lFUSaTyXg8VlUVY8x87eNP3wMa2JaNHMdB6G/F2L8QZzKZQqEgiiLLst1ul+M4z/OYzz/8Rttb6tOpKMGE1NtqtUoz7+8fpJOz2awgCMPhsNfr9fv9ODPQCafS5Hr/2k63XavVisViqVQql8tmwmw2W6/XceaPH96fvGu8/R/NZrNer49Go+0n+Q0NbA+nRdPUBAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("picture",{parentName:"span"},"\n          ",(0,i.kt)("source",{parentName:"picture",srcSet:["/st4sd/overview/static/d18ec86177880f854cf835ba77138380/0eda2/build-canvas.webp 288w","/st4sd/overview/static/d18ec86177880f854cf835ba77138380/460e2/build-canvas.webp 576w","/st4sd/overview/static/d18ec86177880f854cf835ba77138380/efbf3/build-canvas.webp 1080w"],sizes:"(max-width: 1080px) 100vw, 1080px",type:"image/webp"}),"\n          ",(0,i.kt)("source",{parentName:"picture",srcSet:["/st4sd/overview/static/d18ec86177880f854cf835ba77138380/7fc1e/build-canvas.png 288w","/st4sd/overview/static/d18ec86177880f854cf835ba77138380/a5df1/build-canvas.png 576w","/st4sd/overview/static/d18ec86177880f854cf835ba77138380/4d206/build-canvas.png 1080w"],sizes:"(max-width: 1080px) 100vw, 1080px",type:"image/png"}),"\n          ",(0,i.kt)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/st4sd/overview/static/d18ec86177880f854cf835ba77138380/4d206/build-canvas.png",alt:"The Canvas interface for building and modifying experiments",title:"The Canvas interface for building and modifying experiments",loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}}),"\n        "),"\n    "),(0,i.kt)("p",null,"The Build Canvas consists of two sections:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Workspace"),": The Workspace takes up most of the Build Canvas real estate. This is where you can wire together Workflows and Components."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Template Workspace"),": The side-panel on the right contains Templates that you can drag and drop onto the Workspace area.")),(0,i.kt)("p",null,"When you first navigate to the Build Canvas, the Template Workspace side-panel on the left gets seeded with the contents of the Graph Library. Entries that have a green background indicate Graphs (i.e. Workflows) and those with a white background indicate individual components. Finally, entries with a ",(0,i.kt)("inlineCode",{parentName:"p"},"(*)")," suffix indicate that they have not been persisted into the Graph Library (more about the Library later on)."),(0,i.kt)("p",null,"This side-panel acts as your ephemeral scratch space for templates/blueprints of Workflows and Components. The next section discusses how to use this side-panel to manage the contents of the Graph Library."),(0,i.kt)("p",null,"To build the graph of an Experiment you create a Workflow and nest within it Components and other Workflows. We refer to Workflows and Components using the term Template. A Template is a black box which performs a function has a signature (name, and parameters) and produces outputs. The outputs of a workflow are its steps (i.e. nested templates) and the outputs of a component are the paths underneath it."),(0,i.kt)("p",null,"The parameters of a template must receive a value and the value can be one of:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"the output of a different component, or"),(0,i.kt)("li",{parentName:"ol"},"the value of a parameter of the parent workflow, or"),(0,i.kt)("li",{parentName:"ol"},"if none of the above, the optional default value of the template’s parameter.")),(0,i.kt)("p",null,"Templates are represented as boxes on the Build Canvas, green for Workflows and white for Components. To next a template inside a Workflow simply drag and drop the template onto the Workflow. Then pick the name of the step that will execute the child template. Next provide the values of the parameters for the child template. To use one of the parent workflow parameters simply find the anchor point"),(0,i.kt)("p",null,"Below you can find a few examples on how to use the Build Canvas."),(0,i.kt)(m,{mdxType:"Tabs"},(0,i.kt)(u,{label:"Hello world from scratch",mdxType:"Tab"},(0,i.kt)("p",null,"Simple hello world example:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/fa71e5bc01737fe825a92797301466fc/create-hello-world.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"hello-world")," Workflow has a single parameter called ",(0,i.kt)("inlineCode",{parentName:"p"},"greetings")," with the default value ",(0,i.kt)("inlineCode",{parentName:"p"},"hello world"),". This parameter is configurable as it is an ",(0,i.kt)("inlineCode",{parentName:"p"},"executionOption")," variable of the experiment. The workflow contains a single component called ",(0,i.kt)("inlineCode",{parentName:"p"},"greetings")," which just prints a string using the ",(0,i.kt)("inlineCode",{parentName:"p"},"echo")," command line. The workflow ",(0,i.kt)("inlineCode",{parentName:"p"},"hello-world")," configures the message that the component prints by setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"greetings")," parameter of the component to the value of the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"message")," of the workflow.")),(0,i.kt)(u,{label:"Edit existing experiments",mdxType:"Tab"},(0,i.kt)("p",null,"You can edit the graph of experiments you create using the Build Canvas:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/f8c1c3108f00e6da83b9d1d1112c005c/edit-experiment.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"Just navigate to the page of the experiment and click the ",(0,i.kt)("inlineCode",{parentName:"p"},"Edit experiment")," button. You will then be able to use to use the Build Canvas to modify the graph of the experiment you selected. In the example above we update the original ",(0,i.kt)("inlineCode",{parentName:"p"},"hello-world")," experiment to have 2 ",(0,i.kt)("inlineCode",{parentName:"p"},"executionOption")," variables: ",(0,i.kt)("inlineCode",{parentName:"p"},"greeting")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),". During execution, the variable ",(0,i.kt)("inlineCode",{parentName:"p"},"greeting")," must have a one of the values ",(0,i.kt)("inlineCode",{parentName:"p"},"hello")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"goodbye"),". The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," variable can be any string. The new ",(0,i.kt)("inlineCode",{parentName:"p"},"hello-world")," experiment now can print ",(0,i.kt)("inlineCode",{parentName:"p"},"hello $name")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"goodbye $name"),".")),(0,i.kt)(u,{label:"Syntax check errors during building",mdxType:"Tab"},(0,i.kt)("br",null),(0,i.kt)("p",null,"Experiments undergo syntax checking ",(0,i.kt)("strong",{parentName:"p"},"before")," going into the experiment catalog:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/93def40c48b58e30835b75fa90ad75f4/syntax-checks.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"When clicking the ",(0,i.kt)("inlineCode",{parentName:"p"},"Register experiment")," button and if the experiment contains errors then the runtime service will reject it. It will reply with a list of errors that you should fix before attempting to register the experiment again. You can get a list of errors while editing workflows and components as well as re-run the validation logic to refresh the list of errors."),(0,i.kt)("br",null),(0,i.kt)("p",null,"Here is a list of rules to keep in mind when building graphs using the Build Canvas:"),(0,i.kt)("br",null),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Parameters of the entrypoint workflow are either input files (i.e. names start with ",(0,i.kt)("inlineCode",{parentName:"li"},"input."),") or have a default value"),(0,i.kt)("li",{parentName:"ul"},"A step of a workflow ",(0,i.kt)("inlineCode",{parentName:"li"},"W")," can only consume the parameters of ",(0,i.kt)("inlineCode",{parentName:"li"},"W")," or the outputs of other steps in ",(0,i.kt)("inlineCode",{parentName:"li"},"W")),(0,i.kt)("li",{parentName:"ul"},"Circular dependencies are illegal"),(0,i.kt)("li",{parentName:"ul"},"Components must have an executable")),(0,i.kt)("br",null),(0,i.kt)("p",null,"For more information see the DSL 2.0 documentation.")),(0,i.kt)(u,{label:"Consume output of component",mdxType:"Tab"},(0,i.kt)("p",null,"Provide the path to the file ",(0,i.kt)("inlineCode",{parentName:"p"},"results.dat")," that the ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation")," component produces to the ",(0,i.kt)("inlineCode",{parentName:"p"},"analysis")," component:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/03b80a278fdf1e0aa54dc5099ea75221/wire-components.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"The runtime will prefix the path ",(0,i.kt)("inlineCode",{parentName:"p"},"/results.dat")," with the path to the working directory of ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation"),". Then it will apply the ",(0,i.kt)("inlineCode",{parentName:"p"},":ref")," method to produce the absolute path to the ",(0,i.kt)("inlineCode",{parentName:"p"},"results.dat")," path. This is the value that will propagate to the ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," parameter of the ",(0,i.kt)("inlineCode",{parentName:"p"},"analysis")," component.")),(0,i.kt)(u,{label:"Run a custom python script",mdxType:"Tab"},(0,i.kt)("p",null,"First containerize your python script and then use it in a component with the ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," backend:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/22a08bef2d5ec539b1e30f79a771f892/use-image.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"To containerize your python application you can follow the ",(0,i.kt)("inlineCode",{parentName:"p"},"How to use this image")," tutorial of the ",(0,i.kt)("inlineCode",{parentName:"p"},"python")," image that the Docker community maintains here: ",(0,i.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/python"},"https://hub.docker.com/_/python"),". You may then upload the container to a Container registry that you have access."),(0,i.kt)("br",null),(0,i.kt)("p",null,"The above example uses the image ",(0,i.kt)("inlineCode",{parentName:"p"},"quay.io/ibmvassiliad/sum:latest"),". The image consists of just 3 files:"),(0,i.kt)("br",null),(0,i.kt)("details",null,(0,i.kt)("summary",null,"sum.py"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"#!/usr/bin/env python\n\nimport numpy as np\nimport sys\n\n# calculate the sum of N floats\nprint(np.sum([float(x) for x in sys.argv[1:]]))\n"))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"requirements.txt"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"numpy==1.26.3\n"))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Dockerfile"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-docker"},"FROM python:3.11-slim\n\nRUN    apt-get update \\\n    && apt-get upgrade -y \\\n    && apt-get clean -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Make sure that files under /app are part of $PATH\nENV PATH=$PATH:/app\nWORKDIR /app\n\nCOPY requirements.txt /app/requirements.txt\n\nRUN pip install -r requirements.txt\n\nCOPY sum.py /app/sum.py\n\n# Make the sum.py file executable\nchmod +x /app/sum.py\n")),(0,i.kt)("br",null),(0,i.kt)("p",null,"To build and push the container place all 3 files in the same directory and then in a terminal inside that directory execute:"),(0,i.kt)("br",null),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"podman build --platform linux/amd64 -f Dockerfile -t <your registry>/sum:latest\npodman push <your registry>/sum:latest\n"))))),(0,i.kt)("h2",null,"The Graph Library"),(0,i.kt)("p",null,"The Graph Library is a collection of re-usable Workflow recipes that the Build Canvas uses to seed the ",(0,i.kt)("inlineCode",{parentName:"p"},"Template Workspace")," side-panel. At the moment, fresh installations of ST4SD come with an empty library and users can manage the contents of the Graph Library while creating or modifying an experiment using the Build Canvas."),(0,i.kt)("p",null,"The Graph Library has the following properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Every entry is a workflow. If a user adds a Component template the library auto-wraps the component in a single-step Workflow container"),(0,i.kt)("li",{parentName:"ul"},"Entries are uniquely identified by the name of the top level workflow"),(0,i.kt)("li",{parentName:"ul"},"Entries are immutable. To “modify” one you must first delete it and then add a new graph with the same name."),(0,i.kt)("li",{parentName:"ul"},"Entries are syntactically valid. If a user attempts to add a Workflow/Component that is invalid they will receive error messages listing the errors. The user must first fix the errors and then add the template to the Graph Library.")),(0,i.kt)("p",null,"Users manage the Graph Library via the Template Workspace side-panel UI element of the Build\nCanvas. You can get to the Build Canvas by either clicking on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Build experiment")," button in the top left corner of the ST4SD Registry UI WebPage or by clicking on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Edit experiment")," button in the main page of one of your experiments."),(0,i.kt)("p",null,"The Build Canvas starts by loading the contents of the Graph Library and displaying them in the Template Workspace side-panel UI element. While users are working with Workflow and Component templates they can move templates back and forth between the Workspace and the Template Workspace as well as between the Template Workspace and the Graph Library. Entries that are in the Template Workspace but have not been stored in the Graph Library have a ",(0,i.kt)("inlineCode",{parentName:"p"},"(*)")," suffix in their name."),(0,i.kt)("p",null,"The following videos demonstrate the core operations of the Graph Library:"),(0,i.kt)(m,{mdxType:"Tabs"},(0,i.kt)(u,{label:"Use a Graph",mdxType:"Tab"},(0,i.kt)("p",null,"Simply drag and drop an entry of the Template Workspace into the Workspace:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/6cfd8b750f235f99aaa690e056b10dce/import-template.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"You can see the full implementation details of the imported template after you drag it from the Template Workspace into the Workspace. The template will then behave as if you had just created it from scratch. For example you can modify as part of editing the graph of your experiment.")),(0,i.kt)(u,{label:"Persist a new Graph",mdxType:"Tab"},(0,i.kt)("p",null,"You can store Graphs (Workflows and Components) in the Graph Library via the Template Workspace:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/831871d4884ebd8b2141a94bcc65ff0e/persist-template.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"Start by creating or finding a Workflow/Component template in your Workspace that you would like to store in the library. Then double click on it and scroll to the bottom of the window that pops up to find the ",(0,i.kt)("inlineCode",{parentName:"p"},"Add to Template Workspace")," button. Clicking that button will create an entry in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Template Workspace")," for said template. If you have selected a Workflow then all its nested children will be packaged into a single Graph and stored in the Graph Library."),(0,i.kt)("br",null),(0,i.kt)("p",null,"When you click the ",(0,i.kt)("inlineCode",{parentName:"p"},"Share")," button you will notice a few changes taking place at the same time:"),(0,i.kt)("br",null),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the suffix ",(0,i.kt)("inlineCode",{parentName:"li"},"(*)")," in the entry’s name will go away as the template is stored in the Graph Library"),(0,i.kt)("li",{parentName:"ul"},"if the template was a Component (i.e. it had a white background) it will automatically be wrapped inside a single-step Workflow (i.e. it will turn green)"))),(0,i.kt)(u,{label:"Delete a Graph",mdxType:"Tab"},(0,i.kt)("p",null,"Double click on an entry in the Template Workspace and click the ",(0,i.kt)("inlineCode",{parentName:"p"},"Delete")," button:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/d021b201c77f914cc99a8ed6378df5cd/delete-template.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"Note that this operation cannot be undone.")),(0,i.kt)(u,{label:"Modify a Graph",mdxType:"Tab"},(0,i.kt)("p",null,"Here is how to modify an existing Graph:"),(0,i.kt)("br",null),(0,i.kt)(c,{src:"/st4sd/overview/e08ad836790a7f2fa1b25b1fde299143/modify-template.mp4",mdxType:"Video"}),(0,i.kt)("br",null),(0,i.kt)("p",null,"Notice that we drop the Graph into the Workspace so that we can modify it. Then we remove the entry from the Graph Library and edit the Graph (i.e. remove some parts of it). Finally, we just add it back into the Graph Library."))))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-build-experiments-registry-ui-mdx-86be5133e45357bf73fd.js.map
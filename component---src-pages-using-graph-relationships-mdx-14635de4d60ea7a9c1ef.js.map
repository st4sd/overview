{"version":3,"file":"component---src-pages-using-graph-relationships-mdx-14635de4d60ea7a9c1ef.js","mappings":"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","sources":["webpack://st4sd-overview/./src/pages/using-graph-relationships.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/travis/build/st4sd/overview/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst Row = makeShortcode(\"Row\");\nconst Column = makeShortcode(\"Column\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    {/*\n       Copyright IBM Inc. All Rights Reserved.\n      SPDX-License-Identifier: Apache-2.0\n     */}\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`Use this page to learn how to use define relationships between virtual experiment graphs.\nReaders should be familiar with the `}<a parentName=\"p\" {...{\n          \"href\": \"/overview/workflow-specification\"\n        }}>{`FlowIR`}</a>{` specification of components.`}</p>\n    </PageDescription>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">What is a relationship?</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Structure of a relationship</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Pushing a relationship to the runtime</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Automatically synthesize new parameterised packages</AnchorLink>\n    </AnchorLinks>\n    <h2>{`What is a relationship?`}</h2>\n    <p>{`A core concept in ST4SD is the virtual experiment. A virtual experiment defines its execution logic in the form of a computational graph. This enables ST4SD to apply graph operations on the graphs of virtual experiments.`}</p>\n    <p>{`For example the runtime support of ST4SD for surrogate models performs a wide range of graph operations on the graphs of virtual experiments. It extracts sub-graphs from one or more virtual experiments, modifies them. Finally, it uses the transformed sub-graphs to update the graphs of different virtual experiment and even generate novel virtual experiments.`}</p>\n    <h2>{`Structure of a relationship`}</h2>\n    <p>{`ST4SD currently features one type of relationship which we term the `}<inlineCode parentName=\"p\">{`transformation`}</inlineCode>{` relationship.`}</p>\n    <p>{`A `}<inlineCode parentName=\"p\">{`transformation`}</inlineCode>{` explains how to replace the `}<inlineCode parentName=\"p\">{`$outputGraph`}</inlineCode>{` nodes in a `}<inlineCode parentName=\"p\">{`target`}</inlineCode>{` graph with `}<inlineCode parentName=\"p\">{`transform($inputGraph)`}</inlineCode>{` nodes from a `}<inlineCode parentName=\"p\">{`source`}</inlineCode>{` graph. Where `}<inlineCode parentName=\"p\">{`transform()`}</inlineCode>{` produces a graph that produces the same outputs as `}<inlineCode parentName=\"p\">{`$outputGraph`}</inlineCode>{`.`}</p>\n    <p>{`To achieve this, the transformation relationship defines how to:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Map each of `}<inlineCode parentName=\"li\">{`$inputGraph`}</inlineCode>{` to a parameter of `}<inlineCode parentName=\"li\">{`$outputGraph`}</inlineCode>{` (or a default value evaluated in the scope of `}<inlineCode parentName=\"li\">{`target`}</inlineCode>{`)`}</li>\n      <li parentName=\"ol\">{`Map each result of `}<inlineCode parentName=\"li\">{`$outputGraph`}</inlineCode>{` to a result of `}<inlineCode parentName=\"li\">{`$inputGraph`}</inlineCode>{` (or a default value evaluated in the scope of `}<inlineCode parentName=\"li\">{`source`}</inlineCode>{`).`}</li>\n    </ol>\n    <p>{`Parameters of the `}<inlineCode parentName=\"p\">{`inputGraph`}</inlineCode>{` are `}<inlineCode parentName=\"p\">{`variables`}</inlineCode>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/workflow-specification#datareference\"\n      }}><inlineCode parentName=\"a\">{`DataReferences`}</inlineCode></a>{` that `}<inlineCode parentName=\"p\">{`$inputGraph`}</inlineCode>{` references which are not produced by nodes in the `}<inlineCode parentName=\"p\">{`$inputGraph`}</inlineCode>{` subset of the source graph.\nThe results of the `}<inlineCode parentName=\"p\">{`$outputGraph`}</inlineCode>{` are `}<inlineCode parentName=\"p\">{`DataReferences`}</inlineCode>{` which leftover nodes in the `}<inlineCode parentName=\"p\">{`target`}</inlineCode>{` graph consume which point to `}<inlineCode parentName=\"p\">{`$outputGraph`}</inlineCode>{` nodes.`}</p>\n    <p>{`Notice that parameters and results can be either DataReferences, variables, or strings which contain references to 0 or more variables. This means that the schema enables you to replace a DataReference in one graph with a string containing 0 or more references to variables of the other graph. In some cases this is a valid transformation action, but this is not the general case.`}</p>\n    <p>{`To this end, when you submit/update a transformation to the runtime service, the service will run tests to ensure that transformation can produce a valid experiment.\nHere are the rules that parameter and result mappings must follow:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`It is a `}<strong parentName=\"li\">{`valid`}</strong>{` operation to substitute a variable in one of the graphs with the value of another variable, or a `}<inlineCode parentName=\"li\">{`value`}</inlineCode>{` that contains 0 or more references to variables in the other graph.`}</li>\n      <li parentName=\"ol\">{`It is a `}<strong parentName=\"li\">{`valid`}</strong>{` operation to substitute a DataReference `}<inlineCode parentName=\"li\">{`A`}</inlineCode>{` in one of the graphs with a DataReference `}<inlineCode parentName=\"li\">{`B`}</inlineCode>{` in the other graph provided that `}<inlineCode parentName=\"li\">{`B`}</inlineCode>{` is valid in the scope of the resulting experiment graph.`}</li>\n      <li parentName=\"ol\">{`It is an `}<strong parentName=\"li\">{`invalid`}</strong>{` operation to substitute a variable in one of the graphs which is used in a place other than the command-line arguments of components with a DataReference`}</li>\n    </ol>\n    <p>{`The `}<inlineCode parentName=\"p\">{`schema`}</inlineCode>{` of the relationship transformation (in YAML) is:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`relationship:\n  identifier: name of relationship\n  transform: # there is currently only 1 type of relationship\n    inputGraph: # required\n      components: # required\n      - component identifiers to include\n      # must set exactly 1 of identifier or source\n      identifier: |\n        the string identifier of an existing ParameterisedPackage\n        This syntax sugar field is mutually exclusive with \"source\" field below\n        When set, the runtime sets source to base.packages[0].source\n        of the existing ParameterisedPackage\n      source: # same schema as ParameterisedPackage.base.packages[idx].source\n        git:\n          location:\n            url: https://url/to/clone\n            # one of branch, tag, or commit\n            branch: branch mane (mutually exclusive with tag and commit)\n            tag: branch mane (mutually exclusive with branch and commit)\n            commit: branch mane (mutually exclusive with branch and tag)\n        dataset:\n          location: dataset name\n    outputGraph: identical to relationship.transform.inputGraph (required)\n      components:\n      - component identifiers to exclude from outputGraph\n    relationship: # required\n      inferParameters: true/false (default is true)\n      inferResults: true/false (default is true)\n      graphParameters: # Optional\n      - inputGraphParameter:\n          name: parameter name\n        outputGraphParameter:\n          # name and value are mutually exclusive\n          name: parameter name\n          value: a string which may contain references to variables\n            in the context of the OutputGraph\n      graphResults: # Optional\n      - inputGraphResult:\n          # name and value are mutually exclusive\n          name: parameter\n          value: a string which may contain references to variables\n            in the context of the InputGraph\n        outputGraphResult:\n          name: parameter\n\n`}</code></pre>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\nThe runtime inspects the graphs and how they are used to infer obvious mappings between parameters (if inferParameters is true) and results (if inferResults is true).\n    </InlineNotification>\n    <p>{`The runtime validates the transformation relationships by testing that:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`All inputGraph parameters have a relationship to an outputGraph parameter`}</li>\n      <li parentName=\"ol\">{`All outputGraph results have a relationship to an inputGraph result`}</li>\n    </ol>\n    <h3>{`Pushing a relationship to the runtime`}</h3>\n    <p>{`You can submit a `}<inlineCode parentName=\"p\">{`relationship`}</inlineCode>{` to the ST4SD runtime-service API using the method `}<inlineCode parentName=\"p\">{`experiment.service.db.ExperimentRestAPI.api_relationship_push()`}</inlineCode>{`.`}</p>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\nThe schema above is in YAML format. If you are using python (i.e. an instance of experiment.service.db.ExperimentRestAPI) you should either create an equivalent python dictionary OR a python string that contains the yaml definition and then convert the string into a dictionary using \"yaml.loads(the_string)\".\n    </InlineNotification>\n    <h4>{`Example: push a relationship`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`from __future__ import typing\nimport json\ndef relationship_push(api: experiment.service.db.ExperimentRestAPI):\n    \"\"\"Creates a Transformation relationship between 2 parameterised\n    packages from the ST4SD global registry\n\n    Arguments:\n      api: An instance of ExperimentRestAPI that has connected to your\n           private ST4SD registry\n\n    Notes:\n\n      The method expects that you have already imported 2 parameterised\n      packages from the ST4SD global registry into your private registry.\n      The parameterised packages are: ::\n\n        1. configuration-generator-ani (contains the inputGraph)\n        2. band-gap-dft-gamess-us (contains the outputGraph)\n    \"\"\"\n\n    relationship = {\n      \"identifier\": \"optimizedconfiguration-to-smilesinput\",\n      \"transform\": {\n        \"inputGraph\": {\n          \"identifier\": \"configuration-generator-ani:latest\",\n          \"components\": [\n            \"stage0.GenerateOptimizedConfiguration\"\n          ]\n        },\n        \"outputGraph\": {\n          \"identifier\": \"band-gap-dft-gamess-us:latest\",\n          \"components\": [\n            \"stage0.SMILESToGAMESSInput\"\n          ]\n        }\n      }\n    }\n\n    relationship_fleshed_out = api.api_relationship_push(relationship)\n\n    # The runtime system infers mappings between parameters and results\n    print(json.dumps(relationship_fleshed_out, indent=2)\n`}</code></pre>\n    <h3>{`Automatically synthesize new parameterised packages`}</h3>\n    <p>{`You can use a `}<inlineCode parentName=\"p\">{`transformation`}</inlineCode>{` relationship to automatically synthesize a novel virtual parameterised virtual experiment package like so:`}</p>\n    <Row mdxType=\"Row\">\n  <Column colMd={8} colLg={8} noGutterSm mdxType=\"Column\">\n        <span {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"44.79166666666667%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAADLAAAAywAEoZFrbAAACW0lEQVQoz11RXUhTYRh+vnO2s193nGfOeTY0tS10TqkVVoTTFEZB08jtNAla+JOGZelVN1FQF5bQftoWSoVEN2FEXZgmS1A0sy2SMqLoJqguopBuI058ZxbUCw/v+/E97wPP+wCABoADgJ0Qxg6gNP9mRQCFAEEef8tAGLYMgJVyCcPSXcotB1ACYqmkbB3D6fQAtO7WEO/sGCmNdkOYHYW4dhOYPA9Y+A01wc5SnudAf3Fd4AQV1cJgpbsGqgMMLVgwvLRffCWz3p4YeidWS5pj3xvkLKrkeU3TrwUj/i+vdBadY29qpfTr+k1DGcA2BC39UOkADDw2qwczzab+e9y+6CrCV+fE5ssfdn96YHF+m+Yb/S3VAJgCQlADoJZVa+qp1dD1NU8kuuTmexM7HQPpGtPwQ/DhiwTqc+953Zmney1zMuMbfYljiWmj85Is/Mww5V8fFe0CgvSGpQTYDmArYdgdVDh8+7NwYXy2wHbybqNjcMJlPD0DYfC+cmyTETCDsEaazq0qkB9vvVif0rvlJ/DJMv4JhTCM0mVZRvHIPEr6x3zW41GXtu8O+L4bBFBxmjJjkaFJdKq3dV/BkYmPYjCe8x8c/yJ2pN/tsYanUNE1Q9SqfNx1gVNsz+Q6gvFsQ/vosrcrueg5mlh0RVIriCSXCcByUIMU2ghjLgbMlRUeW5s/YvV6W+3VLYfqAFj0+WSVkpIrCkKJZ4bO9BIXiGWFtljW1B7Poi2eVTgcoBx8CwjZrHTA/sehtkDglGHD9eF0ToGUfA4ptYxQMofQtRyk1AtIyRx+AzaNnTnXqj7aAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n              \"srcSet\": [\"/overview/static/0617c3789009898bbbe5f0f45f523cbe/0eda2/transformation-synthesize.webp 288w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/460e2/transformation-synthesize.webp 576w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/e0ca3/transformation-synthesize.webp 1152w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/d02be/transformation-synthesize.webp 1728w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/c1f4c/transformation-synthesize.webp 2304w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/3fed7/transformation-synthesize.webp 2740w\"],\n              \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n              \"type\": \"image/webp\"\n            }}></source>{`\n          `}<source parentName=\"picture\" {...{\n              \"srcSet\": [\"/overview/static/0617c3789009898bbbe5f0f45f523cbe/7fc1e/transformation-synthesize.png 288w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/a5df1/transformation-synthesize.png 576w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/3cbba/transformation-synthesize.png 1152w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/0b124/transformation-synthesize.png 1728w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/4ea69/transformation-synthesize.png 2304w\", \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/c730b/transformation-synthesize.png 2740w\"],\n              \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n              \"type\": \"image/png\"\n            }}></source>{`\n          `}<img parentName=\"picture\" {...{\n              \"className\": \"gatsby-resp-image-image\",\n              \"src\": \"/overview/static/0617c3789009898bbbe5f0f45f523cbe/3cbba/transformation-synthesize.png\",\n              \"alt\": \"Use a transformation relationship to synthesize a new parameterised package\",\n              \"title\": \"Use a transformation relationship to synthesize a new parameterised package\",\n              \"loading\": \"lazy\",\n              \"decoding\": \"async\",\n              \"style\": {\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"margin\": \"0\",\n                \"verticalAlign\": \"middle\",\n                \"position\": \"absolute\",\n                \"top\": \"0\",\n                \"left\": \"0\"\n              }\n            }}></img>{`\n        `}</picture>{`\n    `}</span>\n  </Column>\n    </Row>\n    <p>{`A user can trigger the runtime to synthesize a new parameterised package by submitting a `}<inlineCode parentName=\"p\">{`synthesis-from-transformation-relationship`}</inlineCode>{` payload to the runtime service using the method `}<inlineCode parentName=\"p\">{`experiment.service.db.ExperimentRestAPI.api_relationship_synthesize()`}</inlineCode>{`.`}</p>\n    <p>{`The structure (in `}<inlineCode parentName=\"p\">{`YAML`}</inlineCode>{`) of the payload is:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`parameterisation:\n  presets:  # optional\n    # Fields defined here *cannot* be overridden by \\`executionOptions\\`.\n    # All fields are optional\n    variables: #A list of preset values for variables in the virtual experiment\n    - name: $name of variable\n      value: $variableValue\n    data:\n      - name: name of a file in the \"data\" directory\n        value: contents of file - utf8 string (not suitable for binary files)\n    runtime:\n      args:\n      - array of \\`elaunch.py\\` command line strings\n    platform:  #Value for the experiment platform.\n  executionOptions: # optional\n    # users may override values within constraints that workflow developers set\n    variables:\n    # Variables that the developer allows the user to override.\n    # These CANNOT appear in presets.variables\n    - name: $variable name\n      valueFrom: #Optional: An array of possible values for the variable\n      # If a user does set a value for the variable the 1st entry is used\n      # If valueFrom is not given then user can set any value for the variable.\n      # if they do not set any value then the variable\n      # receives the value that the workflow definition contains in\n      # the platform definition\n      - value: value of variable\n    data: #A list of data files whose contents the user can set.\n    - name: filename under \\`data\\` directory, the file must already exist\n    runtime: # Arguments to pass to \\`elaunch.py\\`\n             # (cannot include -i -a -d --instanceName)\n      args:\n      - array of elaunch.py command line strings\n    platform: #Default for experiment platform or choice.\n              # Cannot be specified here if in \\`presets\\`\n    - an array of platform names. # If the user does not specifying one on start\n                                  # then the 1st entry is used. If no platform\n                                  # is specified the \\`default\\` platform is used\n\n\n`}</code></pre>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\nThe \"parameterisation\" field is identical to the \"parameterisation\" field of parameterised packages. You can find more details about it in our [parameterised package documentation](/creating-a-parameterised-package#the-parameterisation-section).\n    </InlineNotification>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\nThe schema above is in YAML format. If you are using python (i.e. an instance of experiment.service.db.ExperimentRestAPI) you should either create an equivalent python dictionary OR a python string that contains the yaml definition and then convert the string into a dictionary using \"yaml.loads(the_string)\".\n    </InlineNotification>\n    <p>{`Side effects of synthesis step:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The runtime service will create a novel parameterised package on the registry.`}</li>\n      <li parentName=\"ol\">{`The new parameterised package:`}\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`will contain all components from the virtual experiment that contains `}<inlineCode parentName=\"li\">{`outputGraph`}</inlineCode>{` except for those in the `}<inlineCode parentName=\"li\">{`outputGraph`}</inlineCode>{`. The runtime system will substitute those for the components of the transformed `}<inlineCode parentName=\"li\">{`inputGraph`}</inlineCode>{`.`}</li>\n          <li parentName=\"ol\">{`will have the parameterisation options specified in the `}<inlineCode parentName=\"li\">{`parameterisation`}</inlineCode>{` field of the schema above.`}</li>\n          <li parentName=\"ol\">{`inherits the `}<a parentName=\"li\" {...{\n              \"href\": \"/overview/using-a-virtual-experiment-interface\"\n            }}><inlineCode parentName=\"a\">{`interface`}</inlineCode></a>{` of the virtual experiment that contains the `}<inlineCode parentName=\"li\">{`outputGraph`}</inlineCode></li>\n        </ol>\n      </li>\n    </ol>\n    <h3>{`Example: use a transformation relationship to auto-generate a new parameterised package`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`from __future__ import typing\nimport json\ndef relationship_synthesize(api: experiment.service.db.ExperimentRestAPI):\n    \"\"\"Uses a transformation relationship to synthesize a new parameterised\n    package.\n\n    Arguments:\n      api: An instance of ExperimentRestAPI that has connected to your\n           private ST4SD registry\n\n    Notes:\n\n      The method expects that you have already created the transformation\n      relationship \"optimizedconfiguration-to-smilesinput\" in your\n      ST4SD registry.\n    \"\"\"\n\n    config = {\n        \"parameterisation\": {\n            \"presets\": {\n                \"platform\": \"openshift\",\n            },\n            \"executionOptions\": {\n                \"runtime\": {\n                    \"args\": [\n                        \"--registerWorkflow=yes\"\n                    ]\n                },\n                \"variables\": [\n                    {\n                        \"name\": \"n_conformers\"\n                    },\n                    {\n                        \"name\": \"max_iterations\"\n                    }\n                ]\n            }\n        }\n    }\n\n    synthetic_pvep = api.api_relationship_synthesize(\n        # relationship identifier\n        \"optimizedconfiguration-to-smilesinput\",\n        config,\n        # name of new PVEP\n        \"synthetic\")\n    print(json.dumps(synthetic_pvep, indent=2))\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","mdx","PageDescription","AnchorLinks","AnchorLink","InlineNotification","Row","Column","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","parentName","kind","colMd","colLg","noGutterSm","isMDXComponent"],"sourceRoot":""}
{"componentChunkName":"component---src-pages-build-experiments-registry-ui-mdx","path":"/build-experiments-registry-ui/","result":{"pageContext":{"frontmatter":{"title":"Building experiment using your browser"},"relativePagePath":"/build-experiments-registry-ui.mdx","titleType":"page","MdxNode":{"id":"049d1b34-a690-5914-a6a5-2d0198ed7de7","children":[],"parent":"fe790349-b0b8-5da2-ad84-361adc5ce030","internal":{"content":"---\ntitle: Building experiment using your browser\n---\n\n<!--\n\n  Copyright IBM Inc. All Rights Reserved.\n  SPDX-License-Identifier: Apache-2.0\n\n-->\n\n<PageDescription>\n\nThis page gives an overview of the functionality to build or modify experiments in a browser using the Build Canvas and Graph Library features of the ST4SD Virtual Experiments Registry UI.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Create experiments via the Build Canvas</AnchorLink>\n  <AnchorLink>The Graph Library</AnchorLink>\n</AnchorLinks>\n\n## Create experiments via the Build Canvas\n\nWith the Build Canvas users can create new experiments and modify the graph of existing ones. The users can create Workflows and Components from scratch or re-use those that have already been persisted in the Graph Library. New deployment of ST4SD start with an empty library (more about the Graph Library in the next section).\n\nThere are two ways to access the Build Canvas:\n\n* To create a new experiment: Click on the `Build an experiment` link at the top left corner of the ST4SD Registry UI webpage\n* To modify an existing experiment: Navigate to the main page of the experiment you wish to modify and click on the `Edit experiment` button.\n\nThe Build Canvas looks like this:\n\n![The Canvas interface for building and modifying experiments](../assets/images/canvas/build-canvas.png)\n\nThe Build Canvas consists of two sections:\n\n* `Workspace`: The Workspace takes up most of the Build Canvas real estate. This is where you can wire together Workflows and Components.\n* `Template Workspace`: The side-panel on the right contains Templates that you can drag and drop onto the Workspace area.\n\nWhen you first navigate to the Build Canvas, the Template Workspace side-panel on the left gets seeded with the contents of the Graph Library. Entries that have a green background indicate Graphs (i.e. Workflows) and those with a white background indicate individual components. Finally, entries with a `(*)` suffix indicate that they have not been persisted into the Graph Library (more about the Library later on).\n\nThis side-panel acts as your ephemeral scratch space for templates/blueprints of Workflows and Components. The next section discusses how to use this side-panel to manage the contents of the Graph Library.\n\nTo build the graph of an Experiment you create a Workflow and nest within it Components and other Workflows. We refer to Workflows and Components using the term Template. A Template is a black box which performs a function has a signature (name, and parameters) and produces outputs. The outputs of a workflow are its steps (i.e. nested templates) and the outputs of a component are the paths underneath it.\n\nThe parameters of a template must receive a value and the value can be one of:\n\n1. the output of a different component, or\n2. the value of a parameter of the parent workflow, or\n3. if none of the above, the optional default value of the template's parameter.\n\nTemplates are represented as boxes on the Build Canvas, green for Workflows and white for Components. To next a template inside a Workflow simply drag and drop the template onto the Workflow. Then pick the name of the step that will execute the child template. Next provide the values of the parameters for the child template. To use one of the parent workflow parameters simply find the anchor point\n\nBelow you can find a few examples on how to use the Build Canvas.\n\n<Tabs>\n\n<Tab label=\"Hello world from scratch\">\n\nSimple hello world example:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/create-hello-world.mp4\"></Video>\n\n<br/>\n\nThe `hello-world` Workflow has a single parameter called `greetings` with the default value `hello world`. This parameter is configurable as it is an `executionOption` variable of the experiment. The workflow contains a single component called `greetings` which just prints a string using the `echo` command line. The workflow `hello-world` configures the message that the component prints by setting the `greetings` parameter of the component to the value of the parameter `message` of the workflow.\n\n</Tab>\n\n<Tab label=\"Edit existing experiments\">\n\nYou can edit the graph of experiments you create using the Build Canvas:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/edit-experiment.mp4\"></Video>\n\n<br/>\n\nJust navigate to the page of the experiment and click the `Edit experiment` button. You will then be able to use to use the Build Canvas to modify the graph of the experiment you selected. In the example above we update the original `hello-world` experiment to have 2 `executionOption` variables: `greeting` and `name`. During execution, the variable `greeting` must have a one of the values `hello` or `goodbye`. The `name` variable can be any string. The new `hello-world` experiment now can print `hello $name` or `goodbye $name`.\n\n</Tab>\n\n<Tab label=\"Syntax check errors during building\">\n\n<br/>\n\nExperiments undergo syntax checking **before** going into the experiment catalog:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/syntax-checks.mp4\"></Video>\n\n<br/>\n\nWhen clicking the `Register experiment` button and if the experiment contains errors then the runtime service will reject it. It will reply with a list of errors that you should fix before attempting to register the experiment again. You can get a list of errors while editing workflows and components as well as re-run the validation logic to refresh the list of errors.\n\n<br/>\n\nHere is a list of rules to keep in mind when building graphs using the Build Canvas:\n\n<br/>\n\n- Parameters of the entrypoint workflow are either input files (i.e. names start with `input.`) or have a default value\n- A step of a workflow `W` can only consume the parameters of `W` or the outputs of other steps in `W`\n- Circular dependencies are illegal\n- Components must have an executable\n\n<br/>\n\nFor more information see the DSL 2.0 documentation.\n\n</Tab>\n\n<Tab label=\"Consume output of component\">\n\nProvide the path to the file `results.dat` that the `simulation` component produces to the `analysis` component:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/wire-components.mp4\"></Video>\n\n<br/>\n\nThe runtime will prefix the path `/results.dat` with the path to the working directory of `simulation`. Then it will apply the `:ref` method to produce the absolute path to the `results.dat` path. This is the value that will propagate to the `data` parameter of the `analysis` component.\n\n</Tab>\n\n\n<Tab label=\"Run a custom python script\">\n\nFirst containerize your python script and then use it in a component with the `kubernetes` backend:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/use-image.mp4\"></Video>\n\n<br/>\n\nTo containerize your python application you can follow the `How to use this image` tutorial of the `python` image that the Docker community maintains here: <https://hub.docker.com/_/python>. You may then upload the container to a Container registry that you have access.\n\n<br/>\n\nThe above example uses the image `quay.io/ibmvassiliad/sum:latest`. The image consists of just 3 files:\n\n<br/>\n\n<details><summary>sum.py</summary>\n\n```python\n#!/usr/bin/env python\n\nimport numpy as np\nimport sys\n\n# calculate the sum of N floats\nprint(np.sum([float(x) for x in sys.argv[1:]]))\n```\n\n</details>\n\n<details><summary>requirements.txt</summary>\n\n```\nnumpy==1.26.3\n```\n\n</details>\n\n<details><summary>Dockerfile</summary>\n\n```docker\nFROM python:3.11-slim\n\nRUN    apt-get update \\\n    && apt-get upgrade -y \\\n    && apt-get clean -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Make sure that files under /app are part of $PATH\nENV PATH=$PATH:/app\nWORKDIR /app\n\nCOPY requirements.txt /app/requirements.txt\n\nRUN pip install -r requirements.txt\n\nCOPY sum.py /app/sum.py\n\n# Make the sum.py file executable\nchmod +x /app/sum.py\n```\n\n<br/>\n\nTo build and push the container place all 3 files in the same directory and then in a terminal inside that directory execute:\n\n<br/>\n\n```\npodman build --platform linux/amd64 -f Dockerfile -t <your registry>/sum:latest\npodman push <your registry>/sum:latest\n```\n\n</details>\n\n</Tab>\n\n</Tabs>\n\n\n\n## The Graph Library\n\nThe Graph Library is a collection of re-usable Workflow recipes that the Build Canvas uses to seed the `Template Workspace` side-panel. At the moment, fresh installations of ST4SD come with an empty library and users can manage the contents of the Graph Library while creating or modifying an experiment using the Build Canvas.\n\nThe Graph Library has the following properties:\n\n* Every entry is a workflow. If a user adds a Component template the library auto-wraps the component in a single-step Workflow container\n* Entries are uniquely identified by the name of the top level workflow\n* Entries are immutable. To \"modify\" one you must first delete it and then add a new graph with the same name.\n* Entries are syntactically valid. If a user attempts to add a Workflow/Component that is invalid they will receive error messages listing the errors. The user must first fix the errors and then add the template to the Graph Library.\n\nUsers manage the Graph Library via the Template Workspace side-panel UI element of the Build\nCanvas. You can get to the Build Canvas by either clicking on the `Build experiment` button in the top left corner of the ST4SD Registry UI WebPage or by clicking on the `Edit experiment` button in the main page of one of your experiments.\n\nThe Build Canvas starts by loading the contents of the Graph Library and displaying them in the Template Workspace side-panel UI element. While users are working with Workflow and Component templates they can move templates back and forth between the Workspace and the Template Workspace as well as between the Template Workspace and the Graph Library. Entries that are in the Template Workspace but have not been stored in the Graph Library have a `(*)` suffix in their name.\n\nThe following videos demonstrate the core operations of the Graph Library:\n\n<Tabs>\n\n<!--\nVV: Bug is currently preventing this from working\n\n<Tab label=\"Glance at metadata of a Graph\">\n\nYou can see the name, description, and parameters of a Graph.\n\n<br/>\n\n<br/>\n\nTo see the full implementation details (i.e. nested steps etc) of the Graph simply drag and drop the template from the Template Workspace into the Workspace.\n\n</Tab>\n-->\n\n<Tab label=\"Use a Graph\">\n\nSimply drag and drop an entry of the Template Workspace into the Workspace:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/import-template.mp4\"></Video>\n\n<br/>\n\nYou can see the full implementation details of the imported template after you drag it from the Template Workspace into the Workspace. The template will then behave as if you had just created it from scratch. For example you can modify as part of editing the graph of your experiment.\n\n</Tab>\n\n<Tab label=\"Persist a new Graph\">\n\nYou can store Graphs (Workflows and Components) in the Graph Library via the Template Workspace:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/persist-template.mp4\"></Video>\n\n<br/>\n\nStart by creating or finding a Workflow/Component template in your Workspace that you would like to store in the library. Then double click on it and scroll to the bottom of the window that pops up to find the `Add to Template Workspace` button. Clicking that button will create an entry in the `Template Workspace` for said template. If you have selected a Workflow then all its nested children will be packaged into a single Graph and stored in the Graph Library.\n\n<br/>\n\nWhen you click the `Share` button you will notice a few changes taking place at the same time:\n\n<br/>\n\n* the suffix `(*)` in the entry's name will go away as the template is stored in the Graph Library\n* if the template was a Component (i.e. it had a white background) it will automatically be wrapped inside a single-step Workflow (i.e. it will turn green)\n\n\n\n</Tab>\n\n<Tab label=\"Delete a Graph\">\n\nDouble click on an entry in the Template Workspace and click the `Delete` button:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/delete-template.mp4\"></Video>\n\n<br/>\n\nNote that this operation cannot be undone.\n\n</Tab>\n\n<Tab label=\"Modify a Graph\">\n\nHere is how to modify an existing Graph:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/modify-template.mp4\"></Video>\n\n<br/>\n\nNotice that we drop the Graph into the Workspace so that we can modify it. Then we remove the entry from the Graph Library and edit the Graph (i.e. remove some parts of it). Finally, we just add it back into the Graph Library.\n\n</Tab>\n\n\n</Tabs>\n","type":"Mdx","contentDigest":"0ef3355609f972f9e04c2b9a24d1452b","owner":"gatsby-plugin-mdx","counter":254},"frontmatter":{"title":"Building experiment using your browser"},"exports":{},"rawBody":"---\ntitle: Building experiment using your browser\n---\n\n<!--\n\n  Copyright IBM Inc. All Rights Reserved.\n  SPDX-License-Identifier: Apache-2.0\n\n-->\n\n<PageDescription>\n\nThis page gives an overview of the functionality to build or modify experiments in a browser using the Build Canvas and Graph Library features of the ST4SD Virtual Experiments Registry UI.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Create experiments via the Build Canvas</AnchorLink>\n  <AnchorLink>The Graph Library</AnchorLink>\n</AnchorLinks>\n\n## Create experiments via the Build Canvas\n\nWith the Build Canvas users can create new experiments and modify the graph of existing ones. The users can create Workflows and Components from scratch or re-use those that have already been persisted in the Graph Library. New deployment of ST4SD start with an empty library (more about the Graph Library in the next section).\n\nThere are two ways to access the Build Canvas:\n\n* To create a new experiment: Click on the `Build an experiment` link at the top left corner of the ST4SD Registry UI webpage\n* To modify an existing experiment: Navigate to the main page of the experiment you wish to modify and click on the `Edit experiment` button.\n\nThe Build Canvas looks like this:\n\n![The Canvas interface for building and modifying experiments](../assets/images/canvas/build-canvas.png)\n\nThe Build Canvas consists of two sections:\n\n* `Workspace`: The Workspace takes up most of the Build Canvas real estate. This is where you can wire together Workflows and Components.\n* `Template Workspace`: The side-panel on the right contains Templates that you can drag and drop onto the Workspace area.\n\nWhen you first navigate to the Build Canvas, the Template Workspace side-panel on the left gets seeded with the contents of the Graph Library. Entries that have a green background indicate Graphs (i.e. Workflows) and those with a white background indicate individual components. Finally, entries with a `(*)` suffix indicate that they have not been persisted into the Graph Library (more about the Library later on).\n\nThis side-panel acts as your ephemeral scratch space for templates/blueprints of Workflows and Components. The next section discusses how to use this side-panel to manage the contents of the Graph Library.\n\nTo build the graph of an Experiment you create a Workflow and nest within it Components and other Workflows. We refer to Workflows and Components using the term Template. A Template is a black box which performs a function has a signature (name, and parameters) and produces outputs. The outputs of a workflow are its steps (i.e. nested templates) and the outputs of a component are the paths underneath it.\n\nThe parameters of a template must receive a value and the value can be one of:\n\n1. the output of a different component, or\n2. the value of a parameter of the parent workflow, or\n3. if none of the above, the optional default value of the template's parameter.\n\nTemplates are represented as boxes on the Build Canvas, green for Workflows and white for Components. To next a template inside a Workflow simply drag and drop the template onto the Workflow. Then pick the name of the step that will execute the child template. Next provide the values of the parameters for the child template. To use one of the parent workflow parameters simply find the anchor point\n\nBelow you can find a few examples on how to use the Build Canvas.\n\n<Tabs>\n\n<Tab label=\"Hello world from scratch\">\n\nSimple hello world example:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/create-hello-world.mp4\"></Video>\n\n<br/>\n\nThe `hello-world` Workflow has a single parameter called `greetings` with the default value `hello world`. This parameter is configurable as it is an `executionOption` variable of the experiment. The workflow contains a single component called `greetings` which just prints a string using the `echo` command line. The workflow `hello-world` configures the message that the component prints by setting the `greetings` parameter of the component to the value of the parameter `message` of the workflow.\n\n</Tab>\n\n<Tab label=\"Edit existing experiments\">\n\nYou can edit the graph of experiments you create using the Build Canvas:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/edit-experiment.mp4\"></Video>\n\n<br/>\n\nJust navigate to the page of the experiment and click the `Edit experiment` button. You will then be able to use to use the Build Canvas to modify the graph of the experiment you selected. In the example above we update the original `hello-world` experiment to have 2 `executionOption` variables: `greeting` and `name`. During execution, the variable `greeting` must have a one of the values `hello` or `goodbye`. The `name` variable can be any string. The new `hello-world` experiment now can print `hello $name` or `goodbye $name`.\n\n</Tab>\n\n<Tab label=\"Syntax check errors during building\">\n\n<br/>\n\nExperiments undergo syntax checking **before** going into the experiment catalog:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/syntax-checks.mp4\"></Video>\n\n<br/>\n\nWhen clicking the `Register experiment` button and if the experiment contains errors then the runtime service will reject it. It will reply with a list of errors that you should fix before attempting to register the experiment again. You can get a list of errors while editing workflows and components as well as re-run the validation logic to refresh the list of errors.\n\n<br/>\n\nHere is a list of rules to keep in mind when building graphs using the Build Canvas:\n\n<br/>\n\n- Parameters of the entrypoint workflow are either input files (i.e. names start with `input.`) or have a default value\n- A step of a workflow `W` can only consume the parameters of `W` or the outputs of other steps in `W`\n- Circular dependencies are illegal\n- Components must have an executable\n\n<br/>\n\nFor more information see the DSL 2.0 documentation.\n\n</Tab>\n\n<Tab label=\"Consume output of component\">\n\nProvide the path to the file `results.dat` that the `simulation` component produces to the `analysis` component:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/wire-components.mp4\"></Video>\n\n<br/>\n\nThe runtime will prefix the path `/results.dat` with the path to the working directory of `simulation`. Then it will apply the `:ref` method to produce the absolute path to the `results.dat` path. This is the value that will propagate to the `data` parameter of the `analysis` component.\n\n</Tab>\n\n\n<Tab label=\"Run a custom python script\">\n\nFirst containerize your python script and then use it in a component with the `kubernetes` backend:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/use-image.mp4\"></Video>\n\n<br/>\n\nTo containerize your python application you can follow the `How to use this image` tutorial of the `python` image that the Docker community maintains here: <https://hub.docker.com/_/python>. You may then upload the container to a Container registry that you have access.\n\n<br/>\n\nThe above example uses the image `quay.io/ibmvassiliad/sum:latest`. The image consists of just 3 files:\n\n<br/>\n\n<details><summary>sum.py</summary>\n\n```python\n#!/usr/bin/env python\n\nimport numpy as np\nimport sys\n\n# calculate the sum of N floats\nprint(np.sum([float(x) for x in sys.argv[1:]]))\n```\n\n</details>\n\n<details><summary>requirements.txt</summary>\n\n```\nnumpy==1.26.3\n```\n\n</details>\n\n<details><summary>Dockerfile</summary>\n\n```docker\nFROM python:3.11-slim\n\nRUN    apt-get update \\\n    && apt-get upgrade -y \\\n    && apt-get clean -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Make sure that files under /app are part of $PATH\nENV PATH=$PATH:/app\nWORKDIR /app\n\nCOPY requirements.txt /app/requirements.txt\n\nRUN pip install -r requirements.txt\n\nCOPY sum.py /app/sum.py\n\n# Make the sum.py file executable\nchmod +x /app/sum.py\n```\n\n<br/>\n\nTo build and push the container place all 3 files in the same directory and then in a terminal inside that directory execute:\n\n<br/>\n\n```\npodman build --platform linux/amd64 -f Dockerfile -t <your registry>/sum:latest\npodman push <your registry>/sum:latest\n```\n\n</details>\n\n</Tab>\n\n</Tabs>\n\n\n\n## The Graph Library\n\nThe Graph Library is a collection of re-usable Workflow recipes that the Build Canvas uses to seed the `Template Workspace` side-panel. At the moment, fresh installations of ST4SD come with an empty library and users can manage the contents of the Graph Library while creating or modifying an experiment using the Build Canvas.\n\nThe Graph Library has the following properties:\n\n* Every entry is a workflow. If a user adds a Component template the library auto-wraps the component in a single-step Workflow container\n* Entries are uniquely identified by the name of the top level workflow\n* Entries are immutable. To \"modify\" one you must first delete it and then add a new graph with the same name.\n* Entries are syntactically valid. If a user attempts to add a Workflow/Component that is invalid they will receive error messages listing the errors. The user must first fix the errors and then add the template to the Graph Library.\n\nUsers manage the Graph Library via the Template Workspace side-panel UI element of the Build\nCanvas. You can get to the Build Canvas by either clicking on the `Build experiment` button in the top left corner of the ST4SD Registry UI WebPage or by clicking on the `Edit experiment` button in the main page of one of your experiments.\n\nThe Build Canvas starts by loading the contents of the Graph Library and displaying them in the Template Workspace side-panel UI element. While users are working with Workflow and Component templates they can move templates back and forth between the Workspace and the Template Workspace as well as between the Template Workspace and the Graph Library. Entries that are in the Template Workspace but have not been stored in the Graph Library have a `(*)` suffix in their name.\n\nThe following videos demonstrate the core operations of the Graph Library:\n\n<Tabs>\n\n<!--\nVV: Bug is currently preventing this from working\n\n<Tab label=\"Glance at metadata of a Graph\">\n\nYou can see the name, description, and parameters of a Graph.\n\n<br/>\n\n<br/>\n\nTo see the full implementation details (i.e. nested steps etc) of the Graph simply drag and drop the template from the Template Workspace into the Workspace.\n\n</Tab>\n-->\n\n<Tab label=\"Use a Graph\">\n\nSimply drag and drop an entry of the Template Workspace into the Workspace:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/import-template.mp4\"></Video>\n\n<br/>\n\nYou can see the full implementation details of the imported template after you drag it from the Template Workspace into the Workspace. The template will then behave as if you had just created it from scratch. For example you can modify as part of editing the graph of your experiment.\n\n</Tab>\n\n<Tab label=\"Persist a new Graph\">\n\nYou can store Graphs (Workflows and Components) in the Graph Library via the Template Workspace:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/persist-template.mp4\"></Video>\n\n<br/>\n\nStart by creating or finding a Workflow/Component template in your Workspace that you would like to store in the library. Then double click on it and scroll to the bottom of the window that pops up to find the `Add to Template Workspace` button. Clicking that button will create an entry in the `Template Workspace` for said template. If you have selected a Workflow then all its nested children will be packaged into a single Graph and stored in the Graph Library.\n\n<br/>\n\nWhen you click the `Share` button you will notice a few changes taking place at the same time:\n\n<br/>\n\n* the suffix `(*)` in the entry's name will go away as the template is stored in the Graph Library\n* if the template was a Component (i.e. it had a white background) it will automatically be wrapped inside a single-step Workflow (i.e. it will turn green)\n\n\n\n</Tab>\n\n<Tab label=\"Delete a Graph\">\n\nDouble click on an entry in the Template Workspace and click the `Delete` button:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/delete-template.mp4\"></Video>\n\n<br/>\n\nNote that this operation cannot be undone.\n\n</Tab>\n\n<Tab label=\"Modify a Graph\">\n\nHere is how to modify an existing Graph:\n\n<br/>\n\n<Video src=\"../assets/videos/canvas/modify-template.mp4\"></Video>\n\n<br/>\n\nNotice that we drop the Graph into the Workspace so that we can modify it. Then we remove the entry from the Graph Library and edit the Graph (i.e. remove some parts of it). Finally, we just add it back into the Graph Library.\n\n</Tab>\n\n\n</Tabs>\n","fileAbsolutePath":"/Users/vassilis/projects/st4sd/overview/src/pages/build-experiments-registry-ui.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}
{"version":3,"file":"component---src-pages-using-containers-mdx-7f3b68726bcbbf7440dc.js","mappings":"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","sources":["webpack://st4sd-overview/./src/pages/using-containers.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/travis/build/st4sd/overview/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    {/*\n       Copyright IBM Inc. All Rights Reserved.\n      SPDX-License-Identifier: Apache-2.0\n     */}\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`This page will teach you how to write and run a workflow that uses application containers via a toy-example.\nWe advise users becoming familiar with the `}<a parentName=\"p\" {...{\n          \"href\": \"/overview/workflow-specification#component\"\n        }}>{`component specification`}</a>{` before continuing.`}</p>\n    </PageDescription>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Using containers locally</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Using containers on Kubernetes</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Using containers in multi-platform workflows</AnchorLink>\n    </AnchorLinks>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"/overview/st4sd-core-getting-started\"\n      }}><strong parentName=\"a\">{`ST4SD core`}</strong></a>{` supports using application containers to execute component tasks.\nApplication containers enable developers to have reproducible experiments that they can share with their community.`}</p>\n    <h2>{`Using containers locally`}</h2>\n    <p>{`Workflows can use `}<inlineCode parentName=\"p\">{`docker`}</inlineCode>{`-like runtimes (e.g. `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.docker.com/\"\n      }}>{`docker`}</a>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"https://podman.io/\"\n      }}>{`podman`}</a>{`)\nfor components which execute containerized applications.`}</p>\n    <p>{`Here is a minimal example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`components:\n- name: hello\n  command:\n    executable: python3\n    arguments: -c \"print('Hello world!')\"\n    expandArguments: none\n  resourceManager:\n    config:\n      backend: docker\n    docker:\n      image: quay.io/fedora/python-311\n`}</code></pre>\n    <p>{`Check out the `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/workflow-specification#component\"\n      }}>{`component specification`}</a>{` for the full schema of component definition.\nBy default, ST4SD will use `}<inlineCode parentName=\"p\">{`docker`}</inlineCode>{` to execute components whose `}<inlineCode parentName=\"p\">{`resourceManager.config.backend`}</inlineCode>{` is set to `}<inlineCode parentName=\"p\">{`docker`}</inlineCode>{`.\nUse the `}<inlineCode parentName=\"p\">{`elaunch.py`}</inlineCode>{` parameter `}<inlineCode parentName=\"p\">{`--dockerExecutableOverride`}</inlineCode>{` to use a different `}<inlineCode parentName=\"p\">{`docker`}</inlineCode>{`-like backend.\nFor example, if the `}<inlineCode parentName=\"p\">{`$PATH`}</inlineCode>{` environment variable on your terminal is configured such that you can run the `}<inlineCode parentName=\"p\">{`podman`}</inlineCode>{`\nexecutable you can use it for your `}<inlineCode parentName=\"p\">{`docker`}</inlineCode>{` components by setting `}<inlineCode parentName=\"p\">{`--dockerExecutableOverride=podman`}</inlineCode>{`.\nIf the executable is not in `}<inlineCode parentName=\"p\">{`$PATH`}</inlineCode>{` you can still use it, you just need to use the full path to it when you set\nthe value of the `}<inlineCode parentName=\"p\">{`--dockerExecutableOverride`}</inlineCode>{` parameter (`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/st4sd/nanopore-geometry-experiment/blob/main/docker-example/run.sh\"\n      }}>{`example`}</a>{`).`}</p>\n    <p>{`Additionally, ST4SD mounts the instance directory in containers it executes.\nYou may need to configure your container runtime system to have read/write access to the instance directory (e.g. by enabling read/write access to the parent directory of the workflow instance).`}</p>\n    <h2>{`Using containers on Kubernetes`}</h2>\n    <p>{`Workflows which are running on a Kubernetes environment (e.g. `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/st4sd-cloud-getting-started\"\n      }}><strong parentName=\"a\">{`ST4SD Cloud`}</strong></a>{` on OpenShift)  can use the `}<inlineCode parentName=\"p\">{`kubernetes`}</inlineCode>{` backend to run containers.`}</p>\n    <p>{`Here is a minimal example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`components:\n- name: hello\n  command:\n    executable: python3\n    arguments: -c \"print('Hello world')\"\n    expandArguments: none\n  resourceManager:\n    config:\n      backend: kubernetes\n    kubernetes:\n      image: quay.io/fedora/python-311\n`}</code></pre>\n    <p>{`To run this, deploy `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/st4sd-cloud-getting-started\"\n      }}><strong parentName=\"a\">{`ST4SD Cloud`}</strong></a>{` then use the `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/running-workflows-on-openshift/\"\n      }}>{`Python client API`}</a>{` to execute the experiment.`}</p>\n    <h2>{`Using containers in multi-platform workflows`}</h2>\n    <p>{`Often, workflows have support for multiple execution environments such as Cloud (e.g. Kubernetes/OpenShift), HPC, or even personal devices like laptops.\nST4SD uses the concept of `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/workflow-specification#platforms\"\n      }}>{`platforms`}</a>{` to help workflow developers define how their workflows should execute under different execution environments.\nTypically developers use a `}<a parentName=\"p\" {...{\n        \"href\": \"/overview/workflow-specification#variables\"\n      }}>{`variable`}</a>{` as the value of the field `}<inlineCode parentName=\"p\">{`resourceManager.config.backend`}</inlineCode>{`.\nAt execution time, a user configures the workflow to run using one of the available `}<inlineCode parentName=\"p\">{`platforms`}</inlineCode>{` by specifying the\n`}<inlineCode parentName=\"p\">{`--platform`}</inlineCode>{` parameter to `}<inlineCode parentName=\"p\">{`elaunch.py`}</inlineCode>{`.\nThe components then use the appropriate backend for the desired `}<inlineCode parentName=\"p\">{`platform`}</inlineCode>{`.`}</p>\n    <p>{`For example, here is a single workflow that uses a backend based on the platform that the user decides at execution time:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`variables:\n # The \"default\" platform configures the component to use the \"docker\" backend\n default:\n   global:\n     backend: docker\n     # All platforms inherit variables of \"default\" and may override their value\n     image: quay.io/fedora/python-311\n # The k8s platform has the component use the \"kubernetes\" backend\n k8s:\n   global:\n     backend: kubernetes\n\ncomponents:\n- name: hello\n command:\n   executable: python3\n   arguments: -c \"print('Hello world')\"\n   expandArguments: none\n resourceManager:\n   config:\n     backend: \"%(backend)s\"\n   docker:\n     image: \"%(image-python)s\"\n   kubernetes:\n     image: \"%(image-python)s\"\n`}</code></pre>\n    <p>{`To run this on a laptop, place the above in a file called `}<inlineCode parentName=\"p\">{`workflow.yaml`}</inlineCode>{`.`}</p>\n    <p>{`Next, `}<inlineCode parentName=\"p\">{`pip install \"st4sd-runtime-core[develop]\"`}</inlineCode>{` and then execute:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`elaunch.py -l40 --platform default workflow.yaml\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","mdx","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutPropertiesLoose","_excluded","Object","assign","mdxType","parentName","isMDXComponent"],"sourceRoot":""}
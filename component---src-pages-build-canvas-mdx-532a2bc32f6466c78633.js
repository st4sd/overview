"use strict";(self.webpackChunkst4sd_overview=self.webpackChunkst4sd_overview||[]).push([[9218],{9040:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return v}});var n=a(45),i=(a(6540),a(5680)),r=a(8027),o=a(1550),l=a(9167);const p=["components"],s={},h=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.yg)("div",t)},m=h("PageDescription"),d=h("AnchorLinks"),u=h("AnchorLink"),y=h("Tabs"),g=h("Tab"),c=h("Video"),f=h("ExpressiveList"),b={_frontmatter:s},w=r.A;function v(e){let{components:t}=e,a=(0,n.A)(e,p);return(0,i.yg)(w,Object.assign({},b,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)(m,{mdxType:"PageDescription"},(0,i.yg)("p",null,"This page gives an overview of the functionality to build or modify experiments\nin a browser using the Build Canvas and Graph Library features of the ST4SD\nVirtual Experiments Registry UI.")),(0,i.yg)(d,{mdxType:"AnchorLinks"},(0,i.yg)(u,{mdxType:"AnchorLink"},"Create experiments via the Build Canvas"),(0,i.yg)(u,{mdxType:"AnchorLink"},"The Graph Library")),(0,i.yg)("h2",null,"Create experiments via the Build Canvas"),(0,i.yg)("p",null,"The Build Canvas enables users to create new experiments and modify existing\nones. With this feature, users can create Workflows and Components from scratch\nor reuse those that have already been saved in the Graph Library. When you first\nstart using ST4SD, your Graph Library will be empty, but you can easily add to\nit as you create and save new experiments."),(0,i.yg)("p",null,"To access the Build Canvas, you have two options:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"To create a new experiment, click the “Build an experiment” link at the top\nleft corner of the ST4SD Registry UI webpage."),(0,i.yg)("li",{parentName:"ul"},"To modify an existing experiment, go to the main page of the experiment you\nwant to modify and click the “Edit experiment” button.")),(0,i.yg)("p",null,"The Build Canvas looks like this:"),(0,i.yg)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1080px"}},"\n      ",(0,i.yg)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAx1AAAMdQEteJR1AAAB8ElEQVQoz4WSv4/SYBjHy2pijCYMBGKik4x3C6OJrvhjO/8EFwfjHTiYmDNxd7mDAcFLjG5OjkQTh0tMJBwFKgl9KX37i0qh0L5t6du+fU3b8yQufoZn+z7P9/s8DyNADUBDVOZT2VguDLSe/5pJqgJVSVgYxjJhtY4xjIVlWZTSKIFSyvi+jzE2zZU+UzjBPG7TRntzOliefEFAkFwHHR0d371z++GDe4/29mzbTsU0gXFdF2OMEAJgLGmLb2fzM2B3WP6n6PFAcBxUrTxnLt1nbr24ltuBIg/AhOM4AMBms2EwxoREYUiiKG0ZRlGw8dyI4DAMKaWtVuvxk4OXr988fVZRFFnTNAihLMuWZcW2w5BcEJKIkNgViSLf9ymlh4evrl65fPPG9d3dHQjhYDDodDosy5qmmU4m4XaDP2CMKaWVSpVJyOVysixLksTzvK7rQRAwtoORRyg938E2qbhaPRfn83lFUSaTyXg8VlUVY8x87eNP3wMa2JaNHMdB6G/F2L8QZzKZQqEgiiLLst1ul+M4z/OYzz/8Rttb6tOpKMGE1NtqtUoz7+8fpJOz2awgCMPhsNfr9fv9ODPQCafS5Hr/2k63XavVisViqVQql8tmwmw2W6/XceaPH96fvGu8/R/NZrNer49Go+0n+Q0NbA+nRdPUBAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.yg)("picture",{parentName:"span"},"\n          ",(0,i.yg)("source",{parentName:"picture",srcSet:["/overview/static/d18ec86177880f854cf835ba77138380/0eda2/build-canvas.webp 288w","/overview/static/d18ec86177880f854cf835ba77138380/460e2/build-canvas.webp 576w","/overview/static/d18ec86177880f854cf835ba77138380/efbf3/build-canvas.webp 1080w"],sizes:"(max-width: 1080px) 100vw, 1080px",type:"image/webp"}),"\n          ",(0,i.yg)("source",{parentName:"picture",srcSet:["/overview/static/d18ec86177880f854cf835ba77138380/7fc1e/build-canvas.png 288w","/overview/static/d18ec86177880f854cf835ba77138380/a5df1/build-canvas.png 576w","/overview/static/d18ec86177880f854cf835ba77138380/4d206/build-canvas.png 1080w"],sizes:"(max-width: 1080px) 100vw, 1080px",type:"image/png"}),"\n          ",(0,i.yg)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/overview/static/d18ec86177880f854cf835ba77138380/4d206/build-canvas.png",alt:"The Canvas interface for building and modifying experiments",title:"The Canvas interface for building and modifying experiments",loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}}),"\n        "),"\n    "),(0,i.yg)("p",null,"The Build Canvas is divided into two main sections:"),(0,i.yg)("h3",null,"Workspace"),(0,i.yg)("p",null,"The Template Workspace is the side panel on the right-hand side of the Build\nCanvas. It contains a library of Templates that users can drag and drop onto the\nWorkspace area to speed up their experiment creation process. The Template\nWorkspace acts as a temporary scratch space where users can have a list of\nWorkflow and Component templates."),(0,i.yg)("p",null,"When users first open the Build Canvas, the Template Workspace on the left will\nbe populated with items from the Graph Library. The entries in the side panel\nare organized as follows:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Workflows (graph templates) are indicated by a green background."),(0,i.yg)("li",{parentName:"ul"},"Components (individual task templates) have a white background."),(0,i.yg)("li",{parentName:"ul"},"Entries with a ",(0,i.yg)("inlineCode",{parentName:"li"},"(*)")," suffix indicate that they have not been saved to the\nGraph Library yet.")),(0,i.yg)("h2",null,"Building the graph of an experiment"),(0,i.yg)("p",null,"You can create the main Graph of your virtual experiment by nesting Components\n(individual tasks) and other Workflows (sub-graphs) inside a Workflow. Both\nWorkflows and Components share a common interface, which consists of a signature\nwith name and parameters and a set of implicit outputs."),(0,i.yg)("p",null,"The outputs of a Workflow are its nested steps, while the outputs of a Component\nare the paths that it generates when it executes. Since Workflows and Components\nhave the same interface, we can use the term “Template” to refer to either of\nthem."),(0,i.yg)("p",null,"A Template’s parameters must receive a value, which can come from one of three\nsources:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"The output of a different Component."),(0,i.yg)("li",{parentName:"ol"},"The value of a parameter of the parent Workflow."),(0,i.yg)("li",{parentName:"ol"},"If neither of the above, the default value of the template’s parameter.")),(0,i.yg)("p",null,"To nest a template inside a Workflow, simply drag and drop a template from\neither the Template Workspace side panel or the main Workspace onto the\nWorkflow. Next, enter the name of the step that will execute the child template\nin the form that appears. Ensure that the name is unique among the children of\nthe parent Workflow you selected."),(0,i.yg)("p",null,"Next, provide the values of the parameters for the child template. You have a\nfew options for setting the parameters:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Set parameters of the child template to literal values by editing the child\ntemplate directly."),(0,i.yg)("li",{parentName:"ul"},"Set the child parameters to parameters of the parent by connecting the\nparent’s parameters to those of the child. To do this, drag the anchor at the\nbottom of the parent workflow inputs to the top anchor point of the child\ntemplate. Then, assign values to the child parameters in the new form that\nappears."),(0,i.yg)("li",{parentName:"ul"},"Configure the child step to consume outputs of its siblings. To do this, drag\nthe bottom anchor point of a sibling step to the top anchor point of this\nchild step. Then, assign values to the child parameters in the new form that\nappears.")),(0,i.yg)("p",null,"The Build Canvas creates experiments that adhere to version 2.0 of the ST4SD\nWorkflow Specification (i.e. DSL 2.0). You can find more information on DSL 2.0\nat the ",(0,i.yg)("a",{parentName:"p",href:"/overview/workflow-specification-dsl"},"Workflow Specification 2.0 page"),"."),(0,i.yg)("p",null,"Here are a few example videos that demonstrate how to use the Build Canvas:"),(0,i.yg)(y,{mdxType:"Tabs"},(0,i.yg)(g,{label:"Hello world from scratch",mdxType:"Tab"},(0,i.yg)("p",null,"Simple hello world example:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/fa71e5bc01737fe825a92797301466fc/create-hello-world.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"hello-world")," Workflow includes a parameter called ",(0,i.yg)("inlineCode",{parentName:"p"},"greetings")," of type\n",(0,i.yg)("inlineCode",{parentName:"p"},"executionOptions")," that can be modified by users during the experiment launch.\nThis parameter influences the message printed by the workflow’s single\ncomponent, which utilizes the ",(0,i.yg)("inlineCode",{parentName:"p"},"echo")," command. The value of ",(0,i.yg)("inlineCode",{parentName:"p"},"greetings")," is\npropagated from the parent workflow to the child component, determining the\nmessage that is printed.")),(0,i.yg)(g,{label:"Edit existing experiments",mdxType:"Tab"},(0,i.yg)("p",null,"You can edit the graph of experiments you create using the Build Canvas:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/f8c1c3108f00e6da83b9d1d1112c005c/edit-experiment.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"To modify an experiment, simply navigate to its page and click the “Edit\nexperiment” button. This will allow you to use the Build Canvas to make changes\nto the experiment’s graph. For example, in the “hello-world” experiment, we can\nadd two “executionOption” variables: “greeting” and “name”. The “greeting”\nvariable can take on the values “hello” or “goodbye”, while the “name” variable\ncan be any string. With these changes, the updated “hello-world” experiment can\nnow print “hello $name” or “goodbye $name”.")),(0,i.yg)(g,{label:"Syntax check errors during building",mdxType:"Tab"},(0,i.yg)("br",null),(0,i.yg)("p",null,"Experiments undergo syntax checking ",(0,i.yg)("strong",{parentName:"p"},"before")," going into the experiment\ncatalog:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/93def40c48b58e30835b75fa90ad75f4/syntax-checks.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"When you click the “Register experiment” button, the runtime service will check\nthe experiment for errors. If any errors are found, the service will reject the\nexperiment and provide a list of errors that need to be fixed before it can be\nregistered again. This list of errors can also be accessed while editing\nworkflows and components, and you can re-run the validation logic to refresh the\nlist of errors."),(0,i.yg)("br",null),(0,i.yg)("p",null,"When building graphs keep the following in mind:"),(0,i.yg)("br",null),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"The parameters of the entrypoint workflow must either be input files\n(indicated by names starting with ",(0,i.yg)("inlineCode",{parentName:"li"},"input."),") or have default values assigned to\nthem."),(0,i.yg)("li",{parentName:"ul"},"A step in a workflow can only use the parameters of that workflow or the\noutputs of other steps within the same workflow."),(0,i.yg)("li",{parentName:"ul"},"Circular dependencies are not allowed."),(0,i.yg)("li",{parentName:"ul"},"Each component must have an executable associated with it.")),(0,i.yg)("br",null),(0,i.yg)("p",null,"You can find more information regarding DSL 2.0 at the\n",(0,i.yg)("a",{parentName:"p",href:"/overview/workflow-specification-dsl"},"Workflow Specification 2.0 page"),".")),(0,i.yg)(g,{label:"Consume output of component",mdxType:"Tab"},(0,i.yg)("p",null,"Provide the path to the file ",(0,i.yg)("inlineCode",{parentName:"p"},"results.dat")," that the ",(0,i.yg)("inlineCode",{parentName:"p"},"simulation")," component\nproduces to the ",(0,i.yg)("inlineCode",{parentName:"p"},"analysis")," component:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/03b80a278fdf1e0aa54dc5099ea75221/wire-components.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"The runtime will prefix the path ",(0,i.yg)("inlineCode",{parentName:"p"},"/results.dat")," with the path to the working\ndirectory of ",(0,i.yg)("inlineCode",{parentName:"p"},"simulation"),". Then it will apply the ",(0,i.yg)("inlineCode",{parentName:"p"},":ref")," method to produce the\nabsolute path to the ",(0,i.yg)("inlineCode",{parentName:"p"},"results.dat")," path. This is the value that will propagate\nto the ",(0,i.yg)("inlineCode",{parentName:"p"},"data")," parameter of the ",(0,i.yg)("inlineCode",{parentName:"p"},"analysis")," component.")),(0,i.yg)(g,{label:"Run a custom python script",mdxType:"Tab"},(0,i.yg)("p",null,"First containerize your python script and then use it in a component with the\n",(0,i.yg)("inlineCode",{parentName:"p"},"kubernetes")," backend:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/22a08bef2d5ec539b1e30f79a771f892/use-image.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"To containerize your python application you can follow the\n",(0,i.yg)("inlineCode",{parentName:"p"},"How to use this image")," tutorial of the ",(0,i.yg)("inlineCode",{parentName:"p"},"python")," image that the Docker community\nmaintains here: ",(0,i.yg)("a",{parentName:"p",href:"https://hub.docker.com/_/python"},"https://hub.docker.com/_/python"),". You may then upload the\ncontainer to a Container registry that you have access."),(0,i.yg)("br",null),(0,i.yg)("p",null,"The above example uses the image ",(0,i.yg)("inlineCode",{parentName:"p"},"quay.io/ibmvassiliad/sum:latest"),". The image\nconsists of just 3 files:"),(0,i.yg)("br",null),(0,i.yg)("details",null,(0,i.yg)("summary",null,"sum.py"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"#!/usr/bin/env python\n\nimport numpy as np\nimport sys\n\n# calculate the sum of N floats\nprint(np.sum([float(x) for x in sys.argv[1:]]))\n"))),(0,i.yg)("details",null,(0,i.yg)("summary",null,"requirements.txt"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"numpy==1.26.3\n"))),(0,i.yg)("details",null,(0,i.yg)("summary",null,"Dockerfile"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-docker"},"FROM python:3.11-slim\n\nRUN    apt-get update \\\n    && apt-get upgrade -y \\\n    && apt-get clean -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Make sure that files under /app are part of $PATH\nENV PATH=$PATH:/app\nWORKDIR /app\n\nCOPY requirements.txt /app/requirements.txt\n\nRUN pip install -r requirements.txt\n\nCOPY sum.py /app/sum.py\n\n# Make the sum.py file executable\nRUN chmod +x /app/sum.py\n")),(0,i.yg)("br",null),(0,i.yg)("p",null,"To build and push the container place all 3 files in the same directory and then\nin a terminal inside that directory execute:"),(0,i.yg)("br",null),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"podman build --platform linux/amd64 -f Dockerfile -t <your registry>/sum:latest\npodman push <your registry>/sum:latest .\n"))))),(0,i.yg)("h2",null,"The Graph Library"),(0,i.yg)("p",null,"The Graph Library is a collection of reusable Workflow recipes that the Build\nCanvas uses to populate the ",(0,i.yg)("inlineCode",{parentName:"p"},"Template Workspace")," side-panel. New installations\nof ST4SD come with an empty library, and users can manage the library’s contents\nvia the Build Canvas."),(0,i.yg)("p",null,"The Graph Library has several properties:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Each entry is a workflow, and if a user registers a Component template, the\nlibrary automatically wraps it in a single-step Workflow container."),(0,i.yg)("li",{parentName:"ul"},"Entries are identified by the name of their top-level workflow."),(0,i.yg)("li",{parentName:"ul"},"Entries are immutable, meaning that to modify one, you must first delete it\nand then add a new graph with the same name."),(0,i.yg)("li",{parentName:"ul"},"Entries are syntactically valid, and if a user attempts to add a\nWorkflow/Component with errors, they will receive error messages listing the\nproblems. The user must fix the errors before adding the template to the Graph\nLibrary.")),(0,i.yg)("p",null,"Users can manage the Graph Library via the Template Workspace side-panel UI\nelement of the Build Canvas. To access the Build Canvas, click the\n",(0,i.yg)("inlineCode",{parentName:"p"},"Build experiment")," button in the top left corner of the ST4SD Registry UI\nWebPage or the ",(0,i.yg)("inlineCode",{parentName:"p"},"Edit experiment")," button in the main page of one of your\nexperiments."),(0,i.yg)("p",null,"The Build Canvas starts by loading the Graph Library’s contents and displaying\nthem in the Template Workspace side-panel UI element. Users can move templates\nbetween the Workspace and the Template Workspace, as well as between the\nTemplate Workspace and the Graph Library. Entries that are in the Template\nWorkspace but have not been stored in the Graph Library have a ",(0,i.yg)("inlineCode",{parentName:"p"},"(*)")," suffix in\ntheir name."),(0,i.yg)("p",null,"The following videos demonstrate the core operations of the Graph Library:"),(0,i.yg)(y,{mdxType:"Tabs"},(0,i.yg)(g,{label:"Use a Graph",mdxType:"Tab"},(0,i.yg)("p",null,"Simply drag and drop an entry of the Template Workspace into the Workspace:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/6cfd8b750f235f99aaa690e056b10dce/import-template.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"You can see the full implementation details of the imported template after you\ndrag it from the Template Workspace into the Workspace. The template will then\nbehave as if you had just created it from scratch. For example you can modify as\npart of editing the graph of your experiment.")),(0,i.yg)(g,{label:"Persist a new Graph",mdxType:"Tab"},(0,i.yg)("p",null,"You can store Graphs (Workflows and Components) in the Graph Library via the\nTemplate Workspace:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/831871d4884ebd8b2141a94bcc65ff0e/persist-template.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"To add a Workflow or Component template to the Graph Library, start by locating\nthe template in your Workspace. Double-click on the template to open a pop-up\nwindow, and then scroll to the bottom of the window to find the “Add to Template\nWorkspace” button. Clicking this button will create an entry for the template in\nthe Template Workspace. If the template is a Workflow, all of its nested\nchildren will be packaged into a single Graph and stored in the Graph Library."),(0,i.yg)("br",null),(0,i.yg)("p",null,"When you click the ",(0,i.yg)("inlineCode",{parentName:"p"},"Share")," button you will notice a few changes taking place at\nthe same time:"),(0,i.yg)("br",null),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"the suffix ",(0,i.yg)("inlineCode",{parentName:"li"},"(*)")," in the entry’s name will go away as the template is stored in\nthe Graph Library"),(0,i.yg)("li",{parentName:"ul"},"if the template was a Component (i.e. it had a white background) it will\nautomatically be wrapped inside a single-step Workflow (i.e. it will turn\ngreen)"))),(0,i.yg)(g,{label:"Delete a Graph",mdxType:"Tab"},(0,i.yg)("p",null,"Double click on an entry in the Template Workspace and click the ",(0,i.yg)("inlineCode",{parentName:"p"},"Delete"),"\nbutton:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/d021b201c77f914cc99a8ed6378df5cd/delete-template.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"Note that this operation cannot be undone.")),(0,i.yg)(g,{label:"Modify a Graph",mdxType:"Tab"},(0,i.yg)("p",null,"Here is how to modify an existing Graph:"),(0,i.yg)("br",null),(0,i.yg)(c,{src:"/overview/e08ad836790a7f2fa1b25b1fde299143/modify-template.mp4",mdxType:"Video"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"Notice that we drop the Graph into the Workspace so that we can modify it. Then\nwe remove the entry from the Graph Library and edit the Graph (i.e. remove some\nparts of it). Finally, we just add it back into the Graph Library."))),(0,i.yg)("h2",null,"Learn more"),(0,i.yg)("div",{className:"expressive-content-list-group"},(0,i.yg)(f,{title:"Mastering stp",background:"true",pictogram:(0,i.yg)(o.S0q,{mdxType:"Tools"}),mdxType:"ExpressiveList"},(0,i.yg)("p",null,"Learn how to master ",(0,i.yg)("a",{parentName:"p",href:"/overview/stp"},"our command line tool"),", ",(0,i.yg)("inlineCode",{parentName:"p"},"stp"),", for creating and\nmanaging virtual experiment packages.")),(0,i.yg)(f,{title:"Use the APIs",background:"true",pictogram:(0,i.yg)(l.TNV,{mdxType:"ServerOperatingSystems"}),mdxType:"ExpressiveList"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"/overview/running-workflows-on-openshift"},"Learn")," how to use the ST4SD python client API\nto run, query, and interact with virtual experiments. The APIs also offer access\nto a trove of experiment metadata and files such as logs and outputs. You can\nfind more examples in our Jupyter Notebooks\n",(0,i.yg)("a",{parentName:"p",href:"https://github.com/st4sd/st4sd-examples"},"example repository"),"."))))}v.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-build-canvas-mdx-532a2bc32f6466c78633.js.map